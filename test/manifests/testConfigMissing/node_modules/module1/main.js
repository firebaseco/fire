var priest = require("../../../../../index.js")
var Expression = priest.Expression
function module1() {
	
}
module1.prototype = new Expression()
module1.prototype.execute = function() {
	var config = this._blockContext._runtime.getModuleConfiguration("module1")
	this._blockContext._resultCallback("Hello World with configurations, server configuration host is " + config.server + " is and the environment is " + this._blockContext._runtime.environmentName)
}

var priestModule = priest.enableModule(module, function(runtime) {
	if(runtime.getModuleConfiguration('module1') == undefined){
		throw "database connection info is missing"
	}
})

priestModule.exportExpressions([
	{
		name: "module1",
		implementation: module1
	}])